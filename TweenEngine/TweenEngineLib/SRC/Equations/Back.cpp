#include<stdafx.h>
#include"Back.h"

namespace Tween
{
namespace Easing
{
//--------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------
// BackBase
//--------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------

BackBase::BackBase()
: _S(1.70158f)
{

}

//--------------------------------------------------------------------------------------
BackBase& BackBase::S(float _s)
{
	_S = _s;
	return *this;
}

//--------------------------------------------------------------------------------------
float BackIn::Compute(float _t, float _b, float _c, float _d)  const
{
	float s = _S;
	return _c*(_t/=_d)*_t*((s+1.0f)*_t - s) + _b;
}

//--------------------------------------------------------------------------------------
float BackIn::Compute(float _t, float _d)  const
{
	float s = _S;
	return (_t/=_d)*_t*((s+1.0f)*_t - s);
}

//--------------------------------------------------------------------------------------
float BackOut::Compute(float _t, float _b, float _c, float _d)  const
{
	float s = _S;
	return _c*((_t=_t/_d-1.0f)*_t*((s+1.0f)*_t + s) + 1.0f) + _b;
}

//--------------------------------------------------------------------------------------
float BackOut::Compute(float _t, float _d)  const
{
	float s = _S;
	return ((_t=_t/_d-1.0f)*_t*((s+1.0f)*_t + s) + 1.0f);
}

//--------------------------------------------------------------------------------------
float BackInOut::Compute(float _t, float _b, float _c, float _d)  const
{
	float s = _S;
	if ((_t/=_d/2.0f) < 1) 
		return _c/2.0f*(_t*_t*(((s*=(1.525f))+1)*_t - s)) + _b;
	return _c/2.0f*((_t-=2.0f)*_t*(((s*=(1.525f))+1)*_t + s) + 2.0f) + _b;
}

//--------------------------------------------------------------------------------------
float BackInOut::Compute(float _t, float _d)  const
{
	float s = _S;
	if ((_t/=_d/2.0f) < 1.0f) 
		return 0.5f*(_t*_t*(((s*=(1.525f))+1.0f)*_t - s));
	return 0.5f*((_t-=2.0f)*_t*(((s*=(1.525f))+1.0f)*_t + s) + 2.0f);
}

}// Namespace Easing
}// Namespace Tween